# Quartz Cron任务使用指南

## 🚀 快速开始

### 1. 创建预设的Cron任务

#### 每分钟执行
```bash
POST http://localhost:8080/quartz-test/create-cron-job?type=every-minute
```

#### 每5分钟执行
```bash
POST http://localhost:8080/quartz-test/create-cron-job?type=every-5-minutes
```

#### 每小时执行
```bash
POST http://localhost:8080/quartz-test/create-cron-job?type=hourly
```

#### 每天上午9点执行
```bash
POST http://localhost:8080/quartz-test/create-cron-job?type=daily
```

#### 每周一上午9点执行
```bash
POST http://localhost:8080/quartz-test/create-cron-job?type=weekly
```

#### 每月1号上午9点执行
```bash
POST http://localhost:8080/quartz-test/create-cron-job?type=monthly
```

#### 工作日上午9点执行
```bash
POST http://localhost:8080/quartz-test/create-cron-job?type=workdays
```

### 2. 创建自定义Cron任务

```bash
POST http://localhost:8080/quartz-test/create-cron-job?type=custom&customCron=0 30 10,14,16 * * ?
```

## 📅 Cron表达式格式

```
秒 分 时 日 月 周
```

### 字段说明
- **秒**: 0-59
- **分**: 0-59  
- **时**: 0-23
- **日**: 1-31
- **月**: 1-12 或 JAN-DEC
- **周**: 1-7 或 SUN-SAT (1=周日)

### 特殊字符
- `*` : 匹配所有值
- `?` : 不指定值（用于日和周字段）
- `-` : 范围（如1-5表示1到5）
- `,` : 列举（如1,3,5表示1、3、5）
- `/` : 步长（如0/15表示从0开始每15分钟）
- `L` : 最后（如6L表示最后一个周五）
- `W` : 工作日
- `#` : 第几个（如6#3表示第3个周五）

## 🕐 常用Cron表达式示例

| Cron表达式 | 说明 |
|-----------|------|
| `0 * * * * ?` | 每分钟执行 |
| `0 */5 * * * ?` | 每5分钟执行 |
| `0 0 * * * ?` | 每小时执行 |
| `0 0 9 * * ?` | 每天上午9点执行 |
| `0 0 9 ? * MON` | 每周一上午9点执行 |
| `0 0 9 1 * ?` | 每月1号上午9点执行 |
| `0 0 9 ? * MON-FRI` | 工作日上午9点执行 |
| `0 30 10,14,16 * * ?` | 每天10:30、14:30、16:30执行 |
| `0 0 12 ? * WED` | 每周三中午12点执行 |
| `0 0 12 1/15 * ?` | 每月1号和15号中午12点执行 |
| `0 0 0 * * ?` | 每天午夜执行 |
| `0 15 10 ? * *` | 每天上午10:15执行 |
| `0 15 10 * * ?` | 每天上午10:15执行 |
| `0 15 10 * * ? *` | 每天上午10:15执行 |
| `0 15 10 * * ? 2024` | 2024年每天上午10:15执行 |
| `0 * 14 * * ?` | 每天下午2点到2:59期间每分钟执行 |
| `0 0/5 14 * * ?` | 每天下午2点到2:55期间每5分钟执行 |
| `0 0/5 14,18 * * ?` | 每天下午2点到2:55和6点到6:55期间每5分钟执行 |
| `0 0-5 14 * * ?` | 每天下午2点到2:05期间每分钟执行 |
| `0 10,44 14 ? 3 WED` | 三月每周三下午2:10和2:44执行 |
| `0 15 10 ? * MON-FRI` | 工作日上午10:15执行 |
| `0 15 10 15 * ?` | 每月15号上午10:15执行 |
| `0 15 10 L * ?` | 每月最后一天上午10:15执行 |
| `0 15 10 ? * 6L` | 每月最后一个周五上午10:15执行 |
| `0 15 10 ? * 6L 2024-2026` | 2024-2026年每月最后一个周五上午10:15执行 |
| `0 15 10 ? * 6#3` | 每月第三个周五上午10:15执行 |

## 🛠️ API接口

### 获取帮助信息
```bash
GET http://localhost:8080/quartz-test/cron-help
```

### 检查调度器状态
```bash
GET http://localhost:8080/quartz-test/status
```

### 健康检查
```bash
GET http://localhost:8080/quartz-test/health
```

### 立即执行测试任务
```bash
POST http://localhost:8080/quartz-test/run-now
```

## 📝 任务执行日志示例

当Cron任务执行时，您会在控制台看到类似这样的日志：

```
⏰⏰⏰ CRON任务执行中 ⏰⏰⏰
🕐 执行时间: 2024-07-10 19:01:30
📋 任务名称: cronJob_daily
📁 任务组: cronGroup
📝 任务描述: 每天上午9点执行的Cron任务
🔧 触发器: cronJob_daily_trigger
📅 Cron表达式: 0 0 9 * * ?
🌅 执行每日任务 - 数据备份、报表生成等
🔄 开始执行业务逻辑...
✅ 业务逻辑执行完成！耗时: 1000ms
✅ Cron任务执行完成！
⏭️ 下次执行时间: 2024-07-11 09:00:00
====================================================================================================
```

## 🎯 使用建议

1. **测试环境**: 建议先使用`every-minute`类型快速测试
2. **生产环境**: 根据业务需求选择合适的执行频率
3. **监控**: 关注任务执行日志，确保任务正常运行
4. **错误处理**: 任务中应包含适当的错误处理逻辑
5. **性能**: 避免创建过于频繁的任务，影响系统性能

## 🔧 故障排除

1. **任务不执行**: 检查Cron表达式是否正确
2. **时区问题**: 确认服务器时区设置
3. **数据库连接**: 确保MySQL数据源正常
4. **日志查看**: 观察控制台输出的详细日志
